<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Paulo's Encryption Exercise</title>
	<link rel="stylesheet" type="text/css" href="crypt_style.css">
</head>

<body>
	<div class="container">
		<div class="thing"> Encryption Station </div>
		<div class="thing">
			<label> Plain Text:  </label>
			<input type="text" id="plainIn">
			<button onclick="encrypt()">Encrypt</button>
		</div>
		<center class="thing">
			<label> Results:  </label>
			<div id="plain"> </div>
			<div id="rcode">  </div>
		</center>
	</div>
	<div class="container">
		<div class="thing"> Decryption Station </div>
		<div class="thing">
			<label> Encrypted Text:  </label>
			<input type="text" id="codeIn">
			<button onclick="decrypt()">Decrypt</button>
		</div>
		<center class="thing">
			<label> Results:  </label>
			<div id="code">  </div>
			<div id="rplain">  </div>
		</center>
	</div>

	<script type="text/javascript">
		class cryptography {
			constructor(){
				this.text = null;
				this.code = null;
			}

			setText(text){
				this.text = text;
			}

			setCode(code){
				this.code = code;
			}

			public_key(n, e){ //encrypt
				var code = "";
				var arr = Array.from(this.text);
				
				console.log(arr);

				arr.forEach((char) => {
					var m = Math.pow(char.charCodeAt(0), e);
					console.log(m);
					console.log((m%n));
					code += String.fromCharCode((m%n));
				});
				this.setCode(code);
			}

			private_key (n, d){ //decrypt
				var text = "";
				var arr = Array.from(this.code);
				arr.forEach((char) => {
					var m = Math.pow(char.charCodeAt(0), d);
					text += String.fromCharCode((m%n));
				});
				this.setText(text);
			}
		}

		function encrypt(){
			var textInput = document.getElementById("plainIn").value;
			let test1 = new cryptography();

			test1.setText(textInput);
			test1.public_key(223, 143);

			document.getElementById("plain").innerHTML = "Plain Text:  " + test1.text;
			document.getElementById("rcode").innerHTML = "Encrypted:  " + test1.code;
		}

		function decrypt(){
			var codeInput = document.getElementById("codeIn").value;
			let test2 = new cryptography();

			test2.setCode(codeInput);
			test2.private_key(7, 143);

			document.getElementById("code").innerText = "Encrypted:  " + test2.code;
			document.getElementById("rplain").innerText = "Plain Text:  " + test2.text;
		}

	</script>	
</body>
</html>